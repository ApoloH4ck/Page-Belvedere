<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Belvedere Investimenti — Valutazione Gratuita</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body class="is-form-locked">

  <!-- ====== VISTA HOME ====== -->
  <div id="home-view" class="view active">
    <header id="hero" class="hero">
      <div class="hero-bg"></div>
      <div class="hero-waves"></div>

      <!-- blobs decorativos -->
      <div class="blob blob-a" aria-hidden="true"></div>
      <div class="blob blob-b" aria-hidden="true"></div>

      <div class="hero-inner container">
        <span class="tag">VALUTAZIONE GRATUITA</span>
        <h1 class="display">
          Trasformiamo il tuo immobile in <span class="accent">rendimento</span>.
        </h1>
        <p class="lead">
          Dietro Belvedere Investimenti c’è un <strong>ecosistema di specialisti</strong> — analisti,
          marketer, interior &amp; revenue manager — che lavora come un’unica macchina.
          Valutiamo, posizioniamo e gestiamo il tuo appartamento per massimizzare la resa,
          <em>senza attriti</em> per te.
        </p>

        <div class="pill-list">
          <div class="pill">Analisi dati e pricing dinamico proprietario</div>
          <div class="pill">Marketing multicanale &amp; posizionamento premium</div>
          <div class="pill">Gestione end-to-end con reportistica trasparente</div>
        </div>

        <div class="cta-row">
          <a class="btn btn-primary js-open-form" href="#form">Inizia la valutazione</a>
          <button class="scroll-arrow" aria-label="Scorri" data-scroll="#about">
            <span class="arrow">↓</span>
          </button>
        </div>

        <p class="footnote">Team d’élite, processi industrializzati, risultati misurabili</p>
      </div>

      <!-- divisor difuminado hacia la siguiente sección -->
      <div class="fade-divider"></div>
    </header>

    <section id="about" class="about has-parallax">
      <div class="about-bg" role="presentation" aria-hidden="true"></div>
      <div class="container about-card">
        <h2 class="h2">Chi siamo</h2>
        <p class="body">
          Belvedere Investimenti è un team con ampia esperienza in <strong>remodeling</strong>,
          <strong>posizionamento premium</strong> e <strong>gestione data-driven</strong> di appartamenti.
          Combiniamo analisi, design e marketing per trasformare immobili in asset ad alto rendimento,
          con processi chiari e trasparenza totale.
        </p>

        <div class="chip-grid">
          <div class="chip">Progettazione e ristrutturazione orientate al ROI</div>
          <div class="chip">Branding dell’immobile e distribuzione multicanale</div>
          <div class="chip">Pricing dinamico e KPI condivisi</div>
          <div class="chip">Gestione end-to-end con report periodici</div>
        </div>

        <a class="btn btn-primary js-open-form" href="#form">Richiedi la valutazione</a>
      </div>
    </section>
  </div>

  <!-- ====== VISTA FORM (página interna SPA) ====== -->
  <div id="form-view" class="view" aria-hidden="true">
    <header class="form-hero">
      <div class="container">
        <h1 class="h2">Inizia la tua valutazione gratuita</h1>
        <p class="body soft">Compila il modulo: pochi dettagli per costruire un’analisi personalizzata.</p>
      </div>
    </header>

    <main class="section">
      <div class="container">
        <form id="contact-form" class="card form">
          <div class="form-grid">
            <div class="form-group full">
              <label for="nome-cognome">Nome e Cognome</label>
              <input type="text" id="nome-cognome" name="Nome e Cognome" placeholder="Mario Rossi" required>
            </div>

            <div class="form-group">
              <label for="email">Email</label>
              <input type="email" id="email" name="Email" placeholder="mario.rossi@email.it" required>
            </div>
            <div class="form-group">
              <label for="telefono">Telefono</label>
              <input type="tel" id="telefono" name="Telefono" placeholder="+39 123 4567890">
            </div>

            <div class="form-group">
              <label for="citta">Città</label>
              <input type="text" id="citta" name="Città" placeholder="Milano">
            </div>
            <div class="form-group">
              <label for="indirizzo">Indirizzo</label>
              <input type="text" id="indirizzo" name="Indirizzo" placeholder="Via Roma, 1">
            </div>

            <div class="form-group full">
              <label for="messaggio">Messaggio</label>
              <textarea id="messaggio" name="Messaggio" placeholder="Raccontaci di più sul tuo immobile o sugli obiettivi di rendimento..."></textarea>
            </div>

            <div class="form-group full">
              <label for="conosciuti">Dove ci hai conosciuti?</label>
              <select id="conosciuti" name="Conosciuti">
                <option value="">Seleziona...</option>
                <option value="internet">Internet</option>
                <option value="social">Social Media</option>
                <option value="amici">Amici</option>
                <option value="qr-volantino">QR Code / Volantino</option>
              </select>
            </div>
          </div>

          <label class="consent">
            <input type="checkbox" id="privacy" required>
            <span>Accetto la <a href="#" target="_blank" rel="noopener">privacy policy</a> e il trattamento dei miei dati personali.</span>
          </label>

          <div class="btn-row">
            <!-- AUMENTADO con btn-lg -->
            <button type="submit" class="btn btn-primary btn-lg">Invia</button>
            <a href="#home" class="btn btn-ghost btn-lg js-go-home">Torna alla home</a>
          </div>
        </form>
      </div>
    </main>
  </div>

  <!-- ====== MODAL SUCCESS + FX ====== -->
<div id="success-modal" class="modal" aria-hidden="true">
  <div class="modal-card">
    <button class="modal-close" aria-label="Chiudi">×</button>
    <div class="modal-body">
      <div class="emoji">✨</div>
      <h3 class="h3">Richiesta inviata con successo</h3>
      <p class="body soft">Benvenuto nel metodo Belvedere</p>

      <!-- LEYENDA RESTAURADA -->
      <p class="body legend">
        Stiamo predisponendo un’<strong>analisi personalizzata</strong> del tuo immobile con
        indicazioni di <strong>pricing</strong>, <strong>posizionamento</strong> e
        <strong>proiezioni di rendimento</strong>.
      </p>

      <div class="info-card">
        <h4>Cosa succede ora</h4>
        <p>Un consulente dedicato ti contatterà a breve per allineamento e priorità.</p>
      </div>

      <div class="info-card">
        <h4>Il nostro impegno</h4>
        <p>Massima trasparenza, processi chiari e KPI misurabili in ogni fase.</p>
      </div>

      <p class="quote">“L’eccellenza non è un caso: è un sistema.”</p>

      <div class="modal-actions">
        <button id="modal-back" class="btn btn-primary">Torna su</button>
      </div>
    </div>
  </div>
  <!-- FX layers -->
  <div id="confetti-layer"></div>
</div>


  <script>
    /* ====== UTIL ====== */
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
    const smoothTo = (el) => el && el.scrollIntoView({ behavior: 'smooth', block: 'start' });

    /* ====== TRANSICIÓN DIFUMINADA HERO -> ABOUT ====== */
    const hero = $('#hero');
    const fadeDivider = $('.fade-divider');
    const fadeObs = new IntersectionObserver(([e]) => {
      if (!e.isIntersecting) fadeDivider.classList.add('active');
      else fadeDivider.classList.remove('active');
    }, { threshold: 0, rootMargin: "-20% 0px -70% 0px" });
    fadeObs.observe(hero);

    /* ====== SCROLL A ABOUT ====== */
    $$('[data-scroll]').forEach(b => {
      b.addEventListener('click', () => {
        const target = $(b.dataset.scroll);
        smoothTo(target);
      });
    });

    /* ====== SPA: HOME <-> FORM ====== */
    const body = document.body;
    const views = { home: $('#home-view'), form: $('#form-view') };

    function showView(name){
      Object.values(views).forEach(v => v.classList.remove('active'));
      views[name].classList.add('active');
      if (name === 'form') {
        body.classList.remove('is-form-locked');
        views.form.setAttribute('aria-hidden', 'false');
        location.hash = '#form';
        smoothTo(views.form);
      } else {
        body.classList.add('is-form-locked');
        views.form.setAttribute('aria-hidden', 'true');
        location.hash = '#home';
        smoothTo(views.home);
      }
    }

    $$('.js-open-form').forEach(btn => btn.addEventListener('click', (e) => {
      e.preventDefault();
      showView('form');
    }));

    $('.js-go-home')?.addEventListener('click', (e) => {
      e.preventDefault();
      showView('home');
    });

    window.addEventListener('load', () => {
      if (location.hash === '#form') showView('form');
      else showView('home');
    });
    window.addEventListener('hashchange', () => {
      if (location.hash === '#form') showView('form');
      else showView('home');
    });

    /* ====== FORM SUBMIT ====== */
    const form = $('#contact-form');
    const successModal = $('#success-modal');
    const closeBtn = $('.modal-close');
    const backBtn = $('#modal-back');

    function openModal(){
      successModal.classList.add('show');
      launchConfetti(100);
      startFireworks();
    }
    function closeModal(){
      successModal.classList.remove('show');
      stopFireworks();
      clearConfetti();
    }

    closeBtn.addEventListener('click', closeModal);
    backBtn.addEventListener('click', () => { closeModal(); showView('home'); });
    window.addEventListener('click', (e)=>{ if (e.target === successModal) { closeModal(); showView('home'); }});
    window.addEventListener('keydown', (e)=>{ if (e.key === 'Escape' && successModal.classList.contains('show')) { closeModal(); showView('home'); }});

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const formData = {
        NomeCognome: $('#nome-cognome').value,
        Email: $('#email').value,
        Telefono: $('#telefono').value,
        Città: $('#citta').value,
        Indirizzo: $('#indirizzo').value,
        Messaggio: $('#messaggio').value,
        Conosciuti: $('#conosciuti').value
      };

      const scriptURL = 'https://script.google.com/macros/s/AKfycbxKcVuJo7VdMc4KOf-5xoHXGHQXx1B50wywRo_roKvpmHL50M7ckcHHubUgX8nBQuN8/exec';

      openModal();   // Muestra la leyenda + confetti
      form.reset();

      try {
        await fetch(scriptURL, {
          method: 'POST',
          headers: { 'Content-Type': 'text/plain' },
          body: JSON.stringify(formData),
        });
      } catch (err) { /* silencioso */ }
    });

    /* ====== CONFETTI ====== */
    const confettiLayer = $('#confetti-layer');
    function launchConfetti(count=60){
      const colors = ['#4f46e5','#22d3ee','#60a5fa','#e879f9','#34d399','#f59e0b'];
      for (let i = 0; i < count; i++) {
        const c = document.createElement('div');
        c.className = 'confetti';
        c.style.left = Math.random()*100 + '%';
        c.style.background = colors[Math.floor(Math.random()*colors.length)];
        c.style.width = c.style.height = (6+Math.random()*8) + 'px';
        c.style.setProperty('--dx', (Math.random()*2-1)*220 + 'px');
        c.style.setProperty('--dy', (220+Math.random()*320) + 'px');
        c.style.setProperty('--rot', (Math.random()*720-360) + 'deg');
        c.style.animationDelay = (Math.random()*0.4)+'s';
        confettiLayer.appendChild(c);
      }
    }
    function clearConfetti(){ confettiLayer.innerHTML=''; }

    /* ====== FIREWORKS ====== */
    const canvas = $('#fireworks');
    const ctx = canvas.getContext('2d');
    let fwRAF = null, particles = [];

    function resizeCanvas(){ canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    window.addEventListener('resize', resizeCanvas);

    function spawnFirework(){
      const x = Math.random()*canvas.width*0.8 + canvas.width*0.1;
      const y = Math.random()*canvas.height*0.4 + canvas.height*0.2;
      const n = 36;
      const hue = Math.floor(Math.random()*360);
      for (let i=0;i<n;i++){
        const angle = (Math.PI*2) * (i/n);
        particles.push({
          x, y,
          vx: Math.cos(angle)*(1.5+Math.random()*2.5),
          vy: Math.sin(angle)*(1.5+Math.random()*2.5),
          life: 50+Math.random()*20,
          color: `hsl(${hue+(Math.random()*20-10)}, 90%, 60%)`
        });
      }
    }
    function drawFireworks(){
      ctx.fillStyle = 'rgba(0,0,0,0.2)';
      ctx.fillRect(0,0,canvas.width,canvas.height);
      particles.forEach(p=>{
        ctx.beginPath();
        ctx.fillStyle = p.color;
        ctx.arc(p.x, p.y, 2, 0, Math.PI*2);
        ctx.fill();
        p.x += p.vx; p.y += p.vy;
        p.vy += 0.02;
        p.life -= 1;
      });
      particles = particles.filter(p => p.life > 0);
      if (Math.random() < 0.06) spawnFirework();
      fwRAF = requestAnimationFrame(drawFireworks);
    }
    function startFireworks(){
      resizeCanvas();
      canvas.classList.add('on');
      if (!fwRAF) fwRAF = requestAnimationFrame(drawFireworks);
    }
    function stopFireworks(){
      canvas.classList.remove('on');
      if (fwRAF) cancelAnimationFrame(fwRAF);
      fwRAF = null; particles = [];
      ctx.clearRect(0,0,canvas.width,canvas.height);
    }
  </script>
</body>
</html>
